# Универсальные правила (все regex в одинарных кавычках!)
default:
  # Ловим номер заказа из "Order_123456_*" ИЛИ из "#123456"
  order_marker_regex: '(?i)(?:\\bOrder[_\\s-]*(\\d{4,})|#\\s*(\\d{4,}))'

  # Нормализация
  remove_leading_C_in_mpn: true
  ital_express_strip_prefix: true
  materom_mpn_before_dash: true

  # MPN
  mpn_patterns:
    - '(?i)C?(\\d{2}\\.\\d{5}-\\d{4})'
    - '(?i)C?(\\d{2}\\.\\d{5}-\\d{3,5})'
    - '(?i)(\\d{8,})\\s*$'     # длинные цифры в КОНЦЕ строки (например 36732032159)
    - '(?i)(\\d{8,})'         # запасной вариант

  # Quantity
  qty_patterns:
    - '(?i)(\\d+[\\.,]?\\d*)\\s*GAB\\b'     # "7,00 GAB"
    - '(?i)GAB\\s*(\\d+[\\.,]?\\d*)'       # "GAB 7,00"
    - '(?:(?i)(?:QTY|Daudz\\.|Qty)\\s*[:\\-]?\\s*)(\\d+[\\.,]?\\d*)'
    - '(\\d{1,5})(?:[,\\.]00)?(?=\\s*\\d{6,}\\s*$)'  # Число прям перед MPN в конце строки

  # Totalsprice — ПОСЛЕДНЯЯ денежная сумма в строке, допускаем пробелы в тысячах
  total_patterns:
    - '(?i)(\\d{1,3}(?:[ \\u00A0]?\\d{3})*[\\.,]\\d{2})(?!.*\\d{1,3}(?:[ \\u00A0]?\\d{3})*[\\.,]\\d{2})'
